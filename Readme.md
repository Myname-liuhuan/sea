有容乃大

## 🛠 待开发 & 待修改功能

### 🔧 待开发功能
- [ ] 用户权限体系
- [ ] swagger门户
- [ ] 工作流集成
- [ ] 对全局的公共字段要给默认值
- [ ] BaseEntity等系列base类和公共字段，mybatis之间的关系要实现
- [ ] 项目日志选型和实现方式
- [ ] k8s环境下部署实现

### 🩹 待修改 & 优化项
- [ ] 现有的用户权限一套表要重新整理



备注块1:
# JWT + Redis 生命周期管理流程

## 背景
- **JWT 自带过期时间 (`exp`)**，可以控制 token 自然失效。
- 但 **JWT 是无状态的**，一旦签发，在有效期内无法撤销。
- 通过将 token 存储在 **Redis** 并设置 TTL，可以实现：
  - 主动失效（退出、修改密码、踢人）
  - 单端登录 / 并发控制
  - 黑名单机制
  - 统一的服务端控制

---

## 流程图

```text
┌─────────────┐        登录认证        ┌──────────────┐
│   用户登录   │ ───────────────────▶ │  认证服务签发  │
└─────────────┘                        │ AccessToken + │
                                       │ RefreshToken  │
                                       └───────┬──────┘
                                               │
                                               ▼
                                        存入 Redis
                                  (key=用户ID或jti, TTL=过期时间)

────────────────────────────── 请求阶段 ──────────────────────────────

┌───────────────┐
│   用户请求API │
└───────┬───────┘
        │ 携带JWT
        ▼
┌───────────────────┐
│   API网关/服务端  │
└───────┬──────────┘
        │ 校验流程：
        │ 1. 验签 (Signature)
        │ 2. 校验 exp 是否过期
        │ 3. 校验 Redis 是否存在/有效
        ▼
     ┌──────────┐
     │   放行   │
     └──────────┘

────────────────────────────── 失效场景 ──────────────────────────────

 1. 用户退出 / 修改密码 / 被管理员踢下线
    └─> Redis 删除对应 token（或加入黑名单）
        └─> 即使 JWT exp 还没到期，校验时也会被拦截

 2. 单端登录
    └─> 新登录时覆盖 Redis 里的旧 token
        └─> 老 token 自动失效

 3. 过期
    └─> Redis TTL 到期
        └─> 与 JWT exp 一致，自动清理

